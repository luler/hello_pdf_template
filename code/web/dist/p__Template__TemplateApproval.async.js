(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{oVyZ:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return O});a("g9YV");var n=a("wCAj"),o=(a("5NDa"),a("5rEg")),l=(a("2qtc"),a("kLXV")),c=(a("+L6B"),a("2/Rp")),i=(a("miYZ"),a("tsqr")),r=(a("sPJy"),a("bE4q")),s=(a("P2fV"),a("NJEC")),d=(a("/zsF"),a("PArb")),u=(a("+BJd"),a("mr32")),p=a("p0pE"),f=a.n(p),m=a("2Taf"),h=a.n(m),g=a("vZ4D"),v=a.n(g),y=a("l4Ni"),w=a.n(y),E=a("ujKo"),_=a.n(E),b=a("MhPg"),k=a.n(b),x=a("C2bb"),T=a("34ay"),C=a("KHju"),I=a("CiUL"),K=a("q1tI"),R=a.n(K);function S(e,t,a){return t=_()(t),w()(e,j()?Reflect.construct(t,a||[],_()(e).constructor):t.apply(e,a))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(j=function(){return!!e})()}var O=function(e){function t(){var e;h()(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return e=S(this,t,[].concat(n)),e.state={selectedRowKeys:[],approval_reason:"",_loading:!1,_btn_loading:0,list:[],data:{nickname:""},param:{page:1,page_rows:10,search:"",is_approval_list:1},pagination:{showTotal:function(e){return"\u603b\u5171".concat(e,"\u6761\u6570\u636e")},onChange:function(t){e.setState({param:f()({},e.state.param,{page:t})},function(){e.fetch()})}}},e.columns=[{title:"ID",dataIndex:"id"},{title:"\u6a21\u677f\u540d\u79f0",dataIndex:"title"},{title:"\u7b80\u8981\u63cf\u8ff0",dataIndex:"desc"},{title:"\u6240\u5c5e\u7528\u6237",dataIndex:"username"},{title:"\u72b6\u6001",dataIndex:"status",render:function(e){return[R.a.createElement(u["a"],null,"\u5f85\u5ba1\u6838"),R.a.createElement(u["a"],{color:"#87d068"},"\u5ba1\u6838\u901a\u8fc7"),R.a.createElement(u["a"],{color:"#f50"},"\u5ba1\u6838\u4e0d\u901a\u8fc7")][e]}},{title:"\u5ba1\u6838\u7406\u7531",dataIndex:"approval_reason"},{title:"\u5ba1\u6838\u65f6\u95f4",dataIndex:"approval_time"},{title:"\u64cd\u4f5c",width:180,render:function(t,a){return R.a.createElement("div",null,R.a.createElement("a",{onClick:function(){window.location.href="/template/save/".concat(a.id)}},"\u91cd\u65b0\u7533\u8bf7"),R.a.createElement(d["a"],{type:"vertical"}),R.a.createElement(s["a"],{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:function(){Object(C["b"])("/api/delPdfTemplate",{ids:[a.id]}).then(function(){e.fetch()})}},R.a.createElement("a",{style:{color:"red"},href:"#"},"\u5220\u9664")))}}],e}return k()(t,e),v()(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({_loading:!!t,lock:!0},function(){Object(C["a"])("/api/getPdfTemplateList",e.state.param).then(function(t){e.setState(f()({},e.state,{list:t.info.list,_loading:!1,lock:!1,selectedRowKeys:[],pagination:f()({},e.state.pagination,{total:t.info.total,current:t.info.page,pageSize:t.info.page_rows})}))})})}},{key:"render",value:function(){var e=this;return R.a.createElement("div",null,R.a.createElement(r["a"],{style:{padding:20}},R.a.createElement(r["a"].Item,null,R.a.createElement("a",{href:"/"},Object(I["a"])().site_title)),R.a.createElement(r["a"].Item,null,"\u6a21\u677f\u7ba1\u7406"),R.a.createElement(r["a"].Item,null,"\u6a21\u677f\u5ba1\u6838")),R.a.createElement("div",{style:{background:"white",padding:20}},R.a.createElement("div",null,1===Object(T["c"])().is_admin&&R.a.createElement(c["a"],{style:{marginTop:20},type:"primary",onClick:function(){e.state.selectedRowKeys.length<=0?i["a"].info("\u8bf7\u9009\u62e9\u9700\u8981\u5ba1\u6838\u7684\u6a21\u677f"):Object(C["b"])("/api/approvalPdfTemplate",{ids:e.state.selectedRowKeys,status:1,approval_reason:""}).then(function(t){200===t.code&&(i["a"].success(t.message),e.fetch())})}},"\u901a\u8fc7"),1===Object(T["c"])().is_admin&&R.a.createElement(c["a"],{style:{marginLeft:10,marginTop:20},type:"danger",onClick:function(){e.state.selectedRowKeys.length<=0?i["a"].info("\u8bf7\u9009\u62e9\u9700\u8981\u5ba1\u6838\u7684\u6a21\u677f"):l["a"].confirm({title:"\u5ba1\u6838\u7406\u7531",content:R.a.createElement(o["a"].TextArea,{defaultValue:e.state.approval_reason,rows:3,placeholder:"\u8bf7\u8f93\u5165",onChange:function(t){e.setState({approval_reason:t.target.value})}}),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){Object(C["b"])("/api/approvalPdfTemplate",{ids:e.state.selectedRowKeys,status:2,approval_reason:e.state.approval_reason}).then(function(t){200===t.code&&(i["a"].success(t.message),e.fetch())})}})}},"\u4e0d\u901a\u8fc7"),R.a.createElement(o["a"].Search,{allowClear:!0,onSearch:function(t){e.setState({param:f()({},e.state.param,{page:1,search:t})},function(){e.fetch()})},placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57",style:{maxWidth:300,float:"right",marginTop:20}})),R.a.createElement("div",{style:{margin:"30px 0"}},R.a.createElement(n["a"],{columns:this.columns,loading:this.state._loading,dataSource:this.state.list,rowKey:"id",pagination:this.state.pagination,rowSelection:{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t){e.setState({selectedRowKeys:t})}}}))))}}])}(x["a"])}}]);