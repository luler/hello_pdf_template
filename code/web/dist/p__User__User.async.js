(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{jZLU:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return j});a("g9YV");var n=a("wCAj"),i=(a("+L6B"),a("2/Rp")),r=(a("2qtc"),a("kLXV")),l=(a("OaEy"),a("2fM7")),s=(a("y8nQ"),a("Vl3Y")),c=(a("5NDa"),a("5rEg")),d=(a("sPJy"),a("bE4q")),o=(a("BoS7"),a("Sdc0")),p=(a("Telt"),a("Tckk")),u=a("p0pE"),m=a.n(u),h=a("2Taf"),f=a.n(h),g=a("vZ4D"),_=a.n(g),E=a("l4Ni"),v=a.n(E),b=a("ujKo"),C=a.n(b),S=a("MhPg"),k=a.n(S),w=a("q1tI"),I=a.n(w),F=a("KHju"),y=a("wd/R"),O=a.n(y),L=a("CiUL");function q(e,t,a){return t=C()(t),v()(e,x()?Reflect.construct(t,a||[],C()(e).constructor):t.apply(e,a))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}var j=function(e){function t(){var e;f()(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return e=q(this,t,[].concat(n)),e.state={params:{page:1,page_rows:10,search:""},visible:!1,create_data:{},edit_visible:!1,edit_data:{},_loading:!1,info:{page:1,page_rows:10,total:0,list:[]}},e.handleTableChange=function(t){e.setState({params:m()({},e.state.params,{page:t.current,page_rows:t.pageSize})},function(){e.fetch(e.state.params)})},e.onSearch=function(){e.setState({params:m()({},e.state.params,{page:1})},function(){e.fetch(e.state.params)})},e.showCreateModel=function(){e.setState({visible:!0,create_data:{title:"",appid:"",appsecret:"",is_admin:""}})},e.showEditModel=function(t,a,n,i){e.setState({edit_visible:!0,edit_data:{id:t,title:a,appid:n,is_admin:i}},function(){})},e.onFormFieldChange=function(t){if(1==t||0==t)e.setState({create_data:m()({},e.state.create_data,{is_admin:t})});else switch(t.target.name){case"title":e.setState({create_data:m()({},e.state.create_data,{title:t.target.value})});break;case"appid":e.setState({create_data:m()({},e.state.create_data,{appid:t.target.value})});break;case"appsecret":e.setState({create_data:m()({},e.state.create_data,{appsecret:t.target.value})});break}},e.onEditFormFieldChange=function(t){if(1==t||0==t)e.setState({edit_data:m()({},e.state.edit_data,{is_admin:t})});else switch(t.target.name){case"title":e.setState({edit_data:m()({},e.state.edit_data,{title:t.target.value})});break;case"appid":e.setState({edit_data:m()({},e.state.edit_data,{appid:t.target.value})});break;case"appsecret":e.setState({edit_data:m()({},e.state.edit_data,{appsecret:t.target.value})});break}},e.handleOk=function(){e.setState({confirmLoading:!0},function(){Object(F["b"])("/api/addUser",e.state.create_data).then(function(){e.setState({visible:!1,confirmLoading:!1,params:m()({},e.state.params,{page:1})},function(){e.fetch(e.state.params)})})})},e.handleEditOk=function(){e.setState({confirmLoading:!0},function(){Object(F["b"])("/api/editUser",e.state.edit_data).then(function(){e.setState({edit_visible:!1,confirmLoading:!1,params:m()({},e.state.params,{page:1})},function(){e.fetch(e.state.params)})})})},e.onSwithChange=function(t,a){Object(F["b"])("/api/editUser",{id:a,is_use:t}).then(function(){e.setState({params:m()({},e.state.params,{page:1})},function(){e.fetch(e.state.params)})})},e}return k()(t,e),_()(t,[{key:"componentDidMount",value:function(){this.fetch(this.state.params)}},{key:"fetch",value:function(e){var t=this;this.setState({_loading:!0},function(){Object(F["a"])("/api/getUserList",e).then(function(e){t.setState({info:e.info,_loading:!1})})})}},{key:"render",value:function(){var e=this,t=[{title:"Id",dataIndex:"id"},{title:"\u7528\u6237",render:function(e,t){return I.a.createElement("div",null,I.a.createElement(p["a"],{src:t.avatar}),"\xa0 \xa0",I.a.createElement("span",null,t.title))}},{title:"\u8d26\u53f7",dataIndex:"appid"},{title:"\u7528\u6237\u7c7b\u578b",dataIndex:"is_admin",render:function(e,t){return I.a.createElement("div",null,1===t.is_admin?"\u8d85\u7ea7\u7ba1\u7406\u5458":"\u666e\u901a\u7528\u6237")}},{title:"\u72b6\u6001",dataIndex:"is_use",render:function(t,a){return I.a.createElement("div",null,I.a.createElement(o["a"],{checkedChildren:"\u542f\u7528",unCheckedChildren:"\u7981\u7528",onChange:function(t){e.onSwithChange(t?1:0,a.id)},defaultChecked:1===a.is_use}))}},{title:"\u521b\u5efa\u4eba",render:function(e,t){return I.a.createElement("div",null,t.creator_appid,"/",t.creator_name)}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time"},{title:"\u6700\u540e\u767b\u5f55\u65f6\u95f4",dataIndex:"last_login_time",render:function(e){return e&&"".concat(e,"(").concat(O()(e).fromNow(),")")}},{title:"\u64cd\u4f5c",render:function(t,a){return I.a.createElement("span",null,I.a.createElement("a",{onClick:function(){e.showEditModel(a.id,a.title,a.appid,a.is_admin)}},"\u7f16\u8f91"))}}],a={current:this.state.info.page,total:this.state.info.total,pageSize:this.state.params.page_rows,showTotal:function(e,t){return"\u603b\u5171 ".concat(e," \u6761\u6570\u636e")}};return I.a.createElement("div",null,I.a.createElement(d["a"],{style:{padding:20}},I.a.createElement(d["a"].Item,null,I.a.createElement("a",{href:"/"},Object(L["a"])().site_title)),I.a.createElement(d["a"].Item,null,"\u7528\u6237\u7ba1\u7406")),I.a.createElement("div",{style:{background:"white",padding:20}},I.a.createElement(r["a"],{title:"\u7f16\u8f91\u7528\u6237",visible:this.state.edit_visible,onOk:this.handleEditOk,confirmLoading:this.state.confirmLoading||!1,okText:"\u4fdd\u5b58",onCancel:function(){e.setState({edit_visible:!1,confirmLoading:!1})}},I.a.createElement(s["a"],null,I.a.createElement(s["a"].Item,{required:!0,label:"\u7528\u6237\u540d\u79f0"},I.a.createElement(c["a"],{onInput:this.onEditFormFieldChange,name:"title",value:this.state.edit_data.title,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0"})),I.a.createElement(s["a"].Item,{required:!0,label:"\u8d26\u53f7"},I.a.createElement(c["a"],{onInput:this.onEditFormFieldChange,name:"appid",value:this.state.edit_data.appid,placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7",disabled:!0})),I.a.createElement(s["a"].Item,{label:"\u5bc6\u7801"},I.a.createElement(c["a"],{onInput:this.onEditFormFieldChange,name:"appsecret",value:this.state.edit_data.appsecret,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),I.a.createElement(s["a"].Item,{required:!0,label:"\u7528\u6237\u7c7b\u578b"},I.a.createElement(l["a"],{value:this.state.edit_data.is_admin+"",onChange:this.onEditFormFieldChange},I.a.createElement(l["a"].Option,{value:"0"},"\u666e\u901a\u7528\u6237"),I.a.createElement(l["a"].Option,{value:"1"},"\u8d85\u7ea7\u7ba1\u7406\u5458"))))),I.a.createElement("div",{style:{padding:"20px 0"}},I.a.createElement(i["a"],{icon:"plus",type:"primary",onClick:this.showCreateModel},"\u65b0\u589e"),I.a.createElement(r["a"],{title:"\u65b0\u589e\u7528\u6237",visible:this.state.visible,onOk:this.handleOk,confirmLoading:this.state.confirmLoading||!1,okText:"\u4fdd\u5b58",onCancel:function(){e.setState({visible:!1,confirmLoading:!1})}},I.a.createElement(s["a"],null,I.a.createElement(s["a"].Item,{required:!0,label:"title"},I.a.createElement(c["a"],{onInput:this.onFormFieldChange,name:"title",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u79f0",value:this.state.create_data.title})),I.a.createElement(s["a"].Item,{required:!0,label:"appid"},I.a.createElement(c["a"],{onInput:this.onFormFieldChange,name:"appid",placeholder:"\u8bf7\u8f93\u5165appid",value:this.state.create_data.appid})),I.a.createElement(s["a"].Item,{required:!0,label:"appsecret"},I.a.createElement(c["a"],{onInput:this.onFormFieldChange,name:"appsecret",placeholder:"\u8bf7\u8f93\u5165appsecret",value:this.state.create_data.appsecret})),I.a.createElement(s["a"].Item,{required:!0,label:"\u7528\u6237\u7c7b\u578b"},I.a.createElement(l["a"],{onChange:this.onFormFieldChange},I.a.createElement(l["a"].Option,{value:"0"},"\u666e\u901a\u7528\u6237"),I.a.createElement(l["a"].Option,{value:"1"},"\u8d85\u7ea7\u7ba1\u7406\u5458"))))),I.a.createElement(c["a"].Search,{allowClear:!0,onSearch:function(t){e.setState({params:m()({},e.state.params,{page:1,search:t})},function(){e.fetch(e.state.params)})},placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57",style:{maxWidth:300,float:"right"}})),I.a.createElement(n["a"],{dataSource:this.state.info.list,rowKey:"id",pagination:a,columns:t,loading:this.state._loading,onChange:this.handleTableChange})))}}])}(w["Component"])}}]);